<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Prototipo Arte Terapia</title>
  <style>
    body { font-family: sans-serif; margin:0; padding:0; background:#f5f5f5; }
    .container { max-width: 600px; margin: 2rem auto; background: #fff; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h2,h3 { text-align: center; margin-bottom: 1rem; }
    .hidden { display: none !important; }
    button { background: #6b46c1; color: white; border:none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
    button:disabled { background: #ccc; cursor: not-allowed; }
    .card { border: 1px solid #e2e8f0; padding: .75rem; border-radius:4px; margin-bottom: 1rem; }
    .stars { display: flex; gap: .25rem; justify-content: flex-start; margin: .5rem 0; }
    .stars input { display: none; }
    .stars label { font-size: 1.25rem; color: #ccc; cursor: pointer; }
    .stars input:checked ~ label,
    .stars label:hover,
    .stars label:hover ~ label { color: #f5a623; }
    textarea { width: 100%; height: 60px; padding: .5rem; border: 1px solid #ccc; border-radius: 4px; margin-top: .5rem; resize: vertical; }
    .flex { display: flex; gap: .5rem; }
    .flex-center { justify-content: center; }
  </style>
</head>
<body>
  <!-- ... Onboarding y Agenda permanecen igual ... -->

  <!-- Quests con feedback individual -->
  <div id="quests" class="container hidden">
    <h2>âœ… Mis Quests</h2>

    <!-- Arteterapia -->
    <div class="card">
      <h3>ðŸŽ¨ Arteterapia</h3>
      <p>Pinta libre (5â€¯min).</p>
      <label><input type="checkbox" id="chk-Arteterapia"> Completado</label><br>
      <input type="file" id="file-Arteterapia">
      
      <!-- Feedback para Arteterapia -->
      <div class="feedback">
        <strong>Tu valoraciÃ³n:</strong>
        <div class="stars" data-session="Arteterapia">
          <input type="radio" id="star5-Arteterapia" name="rating-Arteterapia" value="5">
          <label for="star5-Arteterapia">â˜…</label>
          <input type="radio" id="star4-Arteterapia" name="rating-Arteterapia" value="4">
          <label for="star4-Arteterapia">â˜…</label>
          <input type="radio" id="star3-Arteterapia" name="rating-Arteterapia" value="3">
          <label for="star3-Arteterapia">â˜…</label>
          <input type="radio" id="star2-Arteterapia" name="rating-Arteterapia" value="2">
          <label for="star2-Arteterapia">â˜…</label>
          <input type="radio" id="star1-Arteterapia" name="rating-Arteterapia" value="1">
          <label for="star1-Arteterapia">â˜…</label>
        </div>
        <textarea id="comment-Arteterapia" placeholder="Comentarios..."></textarea>
      </div>
    </div>

    <!-- Lectura de CafÃ© -->
    <div class="card">
      <h3>â˜• Lectura de CafÃ©</h3>
      <p>Dibuja la borra (10â€¯min).</p>
      <label><input type="checkbox" id="chk-Lectura de CafÃ©"> Completado</label><br>
      <input type="file" id="file-Lectura de CafÃ©">
      
      <!-- Feedback para Lectura de CafÃ© -->
      <div class="feedback">
        <strong>Tu valoraciÃ³n:</strong>
        <div class="stars" data-session="Lectura de CafÃ©">
          <input type="radio" id="star5-Cafe" name="rating-Cafe" value="5">
          <label for="star5-Cafe">â˜…</label>
          <input type="radio" id="star4-Cafe" name="rating-Cafe" value="4">
          <label for="star4-Cafe">â˜…</label>
          <input type="radio" id="star3-Cafe" name="rating-Cafe" value="3">
          <label for="star3-Cafe">â˜…</label>
          <input type="radio" id="star2-Cafe" name="rating-Cafe" value="2">
          <label for="star2-Cafe">â˜…</label>
          <input type="radio" id="star1-Cafe" name="rating-Cafe" value="1">
          <label for="star1-Cafe">â˜…</label>
        </div>
        <textarea id="comment-Cafe" placeholder="Comentarios..."></textarea>
      </div>
    </div>

    <!-- Lectura de la Mano -->
    <div class="card">
      <h3>âœ‹ Lectura de la Mano</h3>
      <p>FotografÃ­a y anota lÃ­neas (10â€¯min).</p>
      <label><input type="checkbox" id="chk-Lectura de la Mano"> Completado</label><br>
      <input type="file" id="file-Lectura de la Mano">
      
      <!-- Feedback para Lectura de la Mano -->
      <div class="feedback">
        <strong>Tu valoraciÃ³n:</strong>
        <div class="stars" data-session="Lectura de la Mano">
          <input type="radio" id="star5-Hand" name="rating-Hand" value="5">
          <label for="star5-Hand">â˜…</label>
          <input type="radio" id="star4-Hand" name="rating-Hand" value="4">
          <label for="star4-Hand">â˜…</label>
          <input type="radio" id="star3-Hand" name="rating-Hand" value="3">
          <label for="star3-Hand">â˜…</label>
          <input type="radio" id="star2-Hand" name="rating-Hand" value="2">
          <label for="star2-Hand">â˜…</label>
          <input type="radio" id="star1-Hand" name="rating-Hand" value="1">
          <label for="star1-Hand">â˜…</label>
        </div>
        <textarea id="comment-Hand" placeholder="Comentarios..."></textarea>
      </div>
    </div>

    <div class="flex flex-center">
      <button id="finishQuests" disabled>ðŸŽ‰ Reclamar Recompensa</button>
      <button id="viewDash">ðŸ“Š Ver Dashboard</button>
    </div>
  </div>

  <!-- ... Dashboard y Modal ... -->

  <script>
    // Al cargar, inicializamos listeners para checkboxes
    const sessions = ['Arteterapia','Lectura de CafÃ©','Lectura de la Mano'];
    let completed = {};

    sessions.forEach(s => {
      const chkId = `chk-${s}`;
      document.getElementById(chkId).addEventListener('change', () => {
        completed[s] = document.getElementById(chkId).checked;
        updateFinishButton();
      });
    });

    function updateFinishButton(){
      const allDone = sessions.every(s => completed[s]);
      document.getElementById('finishQuests').disabled = !allDone;
    }

    // BotÃ³n Reclamar Recompensa
    document.getElementById('finishQuests').onclick = () => {
      // Opcional: recoger feedback por sesiÃ³n
      const results = sessions.map(s => ({
        session: s,
        rating: document.querySelector(`input[name="rating-${s.replace(/[^A-Za-z]/g,'')}"]:checked`)?.value || 0,
        comment: document.getElementById(`comment-${s.replace(/[^A-Za-z]/g,'')}`).value.trim()
      }));
      console.log('Feedback sessions:', results);
      // Mostrar modal o ir al dashboard...
    };

    document.getElementById('viewDash').onclick = () => show('dashboard');
    
    function show(id){
      // ... lÃ³gica de cambio de pantallas ...
    }
  </script>
</body>
</html>
